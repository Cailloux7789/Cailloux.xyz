<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Liste des fichiers et dossiers</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
        }
        h1 {
            font-size: 30px;
        }
        ul {
            list-style-type: none;
            padding: 0;
        }
        li {
            margin-bottom: 5px;
        }
        a {
            text-decoration: none;
            color: #007bff;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <h1>Liste des fichiers et dossiers</h1>
    <ul id="fileList">
        <!-- Insérez ici les éléments de liste générés dynamiquement -->
    </ul>

    <script>
        // Chemin vers le dossier à parcourir
        var directory = 'Cailloux.xyz\DB';

        // Fonction pour récupérer la liste des fichiers et dossiers
        function fetchFileList(directory) {
            var fileListElement = document.getElementById('fileList');
            // Ajouter une barre oblique à la fin du chemin si elle est manquante
            if (directory.charAt(directory.length - 1) !== '/') {
                directory += '/';
            }
            // Ajouter le lien parent (si applicable)
            if (directory !== '/') {
                var listItem = document.createElement('li');
                var linkElement = document.createElement('a');
                linkElement.setAttribute('href', '..');
                linkElement.textContent = '[Dossier parent]';
                listItem.appendChild(linkElement);
                fileListElement.appendChild(listItem);
            }
            // Appel AJAX pour obtenir la liste des fichiers et dossiers
            var xhr = new XMLHttpRequest();
            xhr.open('GET', directory);
            xhr.onload = function () {
                if (xhr.status === 200) {
                    // Convertir la réponse en HTML
                    var doc = new DOMParser().parseFromString(xhr.responseText, 'text/html');
                    // Récupérer les liens de la page
                    var links = doc.querySelectorAll('a');
                    // Afficher les liens dans la liste
                    links.forEach(function (link) {
                        var fileName = link.getAttribute('href');
                        if (fileName !== '../') { // Ignorer les liens parent
                            var listItem = document.createElement('li');
                            var linkElement = document.createElement('a');
                            linkElement.setAttribute('href', directory + fileName);
                            linkElement.textContent = fileName;
                            listItem.appendChild(linkElement);
                            fileListElement.appendChild(listItem);
                        }
                    });
                } else {
                    console.error('Erreur de chargement du dossier');
                }
            };
            xhr.send();
        }

        // Appeler la fonction avec le chemin vers le dossier
        fetchFileList(directory);
    </script>
</body>
</html>
